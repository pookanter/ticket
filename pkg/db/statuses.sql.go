// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.26.0
// source: statuses.sql

package db

import (
	"context"

	"github.com/guregu/null"
)

const createStatus = `-- name: CreateStatus :exec
INSERT INTO
  statuses (board_id, title, sort_order, created_at)
VALUES
  (?, ?, ?, NOW())
`

type CreateStatusParams struct {
	BoardID   uint32      `db:"board_id" json:"board_id"`
	Title     null.String `db:"title" json:"title"`
	SortOrder uint32      `db:"sort_order" json:"sort_order"`
}

func (q *Queries) CreateStatus(ctx context.Context, arg CreateStatusParams) error {
	_, err := q.db.ExecContext(ctx, createStatus, arg.BoardID, arg.Title, arg.SortOrder)
	return err
}

const deleteStatus = `-- name: DeleteStatus :exec
DELETE FROM
  statuses
WHERE
  id = ?
`

func (q *Queries) DeleteStatus(ctx context.Context, id uint32) error {
	_, err := q.db.ExecContext(ctx, deleteStatus, id)
	return err
}

const getStatusesByBoardID = `-- name: GetStatusesByBoardID :many
SELECT
  id, board_id, title, sort_order, created_at, updated_at
FROM
  statuses
WHERE
  board_id = ?
`

func (q *Queries) GetStatusesByBoardID(ctx context.Context, boardID uint32) ([]Status, error) {
	rows, err := q.db.QueryContext(ctx, getStatusesByBoardID, boardID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Status{}
	for rows.Next() {
		var i Status
		if err := rows.Scan(
			&i.ID,
			&i.BoardID,
			&i.Title,
			&i.SortOrder,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateStatus = `-- name: UpdateStatus :exec
UPDATE
  statuses
SET
  title = ?,
  updated_at = NOW()
WHERE
  id = ?
`

type UpdateStatusParams struct {
	Title null.String `db:"title" json:"title"`
	ID    uint32      `db:"id" json:"id"`
}

func (q *Queries) UpdateStatus(ctx context.Context, arg UpdateStatusParams) error {
	_, err := q.db.ExecContext(ctx, updateStatus, arg.Title, arg.ID)
	return err
}
